from pyrogram import Client, filters
import requests

# Replace with your BotFather token
API_ID = 123456
API_HASH = "your_api_hash"
BOT_TOKEN = "your_bot_token"

app = Client("movie_bot", api_id=API_ID, api_hash=API_HASH, bot_token=BOT_TOKEN)

# Free OMDb API (IMDb info) -> get your API key from omdbapi.com
OMDB_API_KEY = "your_omdb_api_key"

@app.on_message(filters.command("start"))
async def start(client, message):
    await message.reply("ğŸ¬ Welcome! Send me a movie name and Iâ€™ll fetch details for you.")

@app.on_message(filters.text & ~filters.command("start"))
async def movie_info(client, message):
    movie_name = message.text
    url = f"http://www.omdbapi.com/?t={movie_name}&apikey={OMDB_API_KEY}"
    data = requests.get(url).json()
    
    if data.get("Response") == "True":
        reply = f"""
ğŸ¬ **{data['Title']}** ({data['Year']})
â­ IMDb: {data['imdbRating']}
ğŸ“– Plot: {data['Plot']}
ğŸ­ Genre: {data['Genre']}
â³ Runtime: {data['Runtime']}
        """
        if data["Poster"] != "N/A":
            await message.reply_photo(photo=data["Poster"], caption=reply)
        else:
            await message.reply(reply)
    else:
        await message.reply("âŒ Movie not found. Try another name!")

app.run()
